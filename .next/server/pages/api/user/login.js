"use strict";
/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
(() => {
var exports = {};
exports.id = "pages/api/user/login";
exports.ids = ["pages/api/user/login"];
exports.modules = {

/***/ "bcryptjs":
/*!***************************!*\
  !*** external "bcryptjs" ***!
  \***************************/
/***/ ((module) => {

module.exports = require("bcryptjs");

/***/ }),

/***/ "cookie":
/*!*************************!*\
  !*** external "cookie" ***!
  \*************************/
/***/ ((module) => {

module.exports = require("cookie");

/***/ }),

/***/ "jsonwebtoken":
/*!*******************************!*\
  !*** external "jsonwebtoken" ***!
  \*******************************/
/***/ ((module) => {

module.exports = require("jsonwebtoken");

/***/ }),

/***/ "mongoose":
/*!***************************!*\
  !*** external "mongoose" ***!
  \***************************/
/***/ ((module) => {

module.exports = require("mongoose");

/***/ }),

/***/ "next/dist/compiled/next-server/pages-api.runtime.dev.js":
/*!**************************************************************************!*\
  !*** external "next/dist/compiled/next-server/pages-api.runtime.dev.js" ***!
  \**************************************************************************/
/***/ ((module) => {

module.exports = require("next/dist/compiled/next-server/pages-api.runtime.dev.js");

/***/ }),

/***/ "(api)/./node_modules/next/dist/build/webpack/loaders/next-route-loader/index.js?kind=PAGES_API&page=%2Fapi%2Fuser%2Flogin&preferredRegion=&absolutePagePath=.%2Fpages%5Capi%5Cuser%5Clogin.js&middlewareConfigBase64=e30%3D!":
/*!******************************************************************************************************************************************************************************************************************************!*\
  !*** ./node_modules/next/dist/build/webpack/loaders/next-route-loader/index.js?kind=PAGES_API&page=%2Fapi%2Fuser%2Flogin&preferredRegion=&absolutePagePath=.%2Fpages%5Capi%5Cuser%5Clogin.js&middlewareConfigBase64=e30%3D! ***!
  \******************************************************************************************************************************************************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   config: () => (/* binding */ config),\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__),\n/* harmony export */   routeModule: () => (/* binding */ routeModule)\n/* harmony export */ });\n/* harmony import */ var next_dist_server_future_route_modules_pages_api_module_compiled__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! next/dist/server/future/route-modules/pages-api/module.compiled */ \"(api)/./node_modules/next/dist/server/future/route-modules/pages-api/module.compiled.js\");\n/* harmony import */ var next_dist_server_future_route_modules_pages_api_module_compiled__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_future_route_modules_pages_api_module_compiled__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var next_dist_server_future_route_kind__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! next/dist/server/future/route-kind */ \"(api)/./node_modules/next/dist/server/future/route-kind.js\");\n/* harmony import */ var next_dist_build_templates_helpers__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! next/dist/build/templates/helpers */ \"(api)/./node_modules/next/dist/build/templates/helpers.js\");\n/* harmony import */ var _pages_api_user_login_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./pages\\api\\user\\login.js */ \"(api)/./pages/api/user/login.js\");\n\n\n\n// Import the userland code.\n\n// Re-export the handler (should be the default export).\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = ((0,next_dist_build_templates_helpers__WEBPACK_IMPORTED_MODULE_2__.hoist)(_pages_api_user_login_js__WEBPACK_IMPORTED_MODULE_3__, \"default\"));\n// Re-export config.\nconst config = (0,next_dist_build_templates_helpers__WEBPACK_IMPORTED_MODULE_2__.hoist)(_pages_api_user_login_js__WEBPACK_IMPORTED_MODULE_3__, \"config\");\n// Create and export the route module that will be consumed.\nconst routeModule = new next_dist_server_future_route_modules_pages_api_module_compiled__WEBPACK_IMPORTED_MODULE_0__.PagesAPIRouteModule({\n    definition: {\n        kind: next_dist_server_future_route_kind__WEBPACK_IMPORTED_MODULE_1__.RouteKind.PAGES_API,\n        page: \"/api/user/login\",\n        pathname: \"/api/user/login\",\n        // The following aren't used in production.\n        bundlePath: \"\",\n        filename: \"\"\n    },\n    userland: _pages_api_user_login_js__WEBPACK_IMPORTED_MODULE_3__\n});\n\n//# sourceMappingURL=pages-api.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwaSkvLi9ub2RlX21vZHVsZXMvbmV4dC9kaXN0L2J1aWxkL3dlYnBhY2svbG9hZGVycy9uZXh0LXJvdXRlLWxvYWRlci9pbmRleC5qcz9raW5kPVBBR0VTX0FQSSZwYWdlPSUyRmFwaSUyRnVzZXIlMkZsb2dpbiZwcmVmZXJyZWRSZWdpb249JmFic29sdXRlUGFnZVBhdGg9LiUyRnBhZ2VzJTVDYXBpJTVDdXNlciU1Q2xvZ2luLmpzJm1pZGRsZXdhcmVDb25maWdCYXNlNjQ9ZTMwJTNEISIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7OztBQUFzRztBQUN2QztBQUNMO0FBQzFEO0FBQ3lEO0FBQ3pEO0FBQ0EsaUVBQWUsd0VBQUssQ0FBQyxxREFBUSxZQUFZLEVBQUM7QUFDMUM7QUFDTyxlQUFlLHdFQUFLLENBQUMscURBQVE7QUFDcEM7QUFDTyx3QkFBd0IsZ0hBQW1CO0FBQ2xEO0FBQ0EsY0FBYyx5RUFBUztBQUN2QjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMLFlBQVk7QUFDWixDQUFDOztBQUVEIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vbXVsdGlrYXJ0LW5leHQvPzVmNWUiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgUGFnZXNBUElSb3V0ZU1vZHVsZSB9IGZyb20gXCJuZXh0L2Rpc3Qvc2VydmVyL2Z1dHVyZS9yb3V0ZS1tb2R1bGVzL3BhZ2VzLWFwaS9tb2R1bGUuY29tcGlsZWRcIjtcbmltcG9ydCB7IFJvdXRlS2luZCB9IGZyb20gXCJuZXh0L2Rpc3Qvc2VydmVyL2Z1dHVyZS9yb3V0ZS1raW5kXCI7XG5pbXBvcnQgeyBob2lzdCB9IGZyb20gXCJuZXh0L2Rpc3QvYnVpbGQvdGVtcGxhdGVzL2hlbHBlcnNcIjtcbi8vIEltcG9ydCB0aGUgdXNlcmxhbmQgY29kZS5cbmltcG9ydCAqIGFzIHVzZXJsYW5kIGZyb20gXCIuL3BhZ2VzXFxcXGFwaVxcXFx1c2VyXFxcXGxvZ2luLmpzXCI7XG4vLyBSZS1leHBvcnQgdGhlIGhhbmRsZXIgKHNob3VsZCBiZSB0aGUgZGVmYXVsdCBleHBvcnQpLlxuZXhwb3J0IGRlZmF1bHQgaG9pc3QodXNlcmxhbmQsIFwiZGVmYXVsdFwiKTtcbi8vIFJlLWV4cG9ydCBjb25maWcuXG5leHBvcnQgY29uc3QgY29uZmlnID0gaG9pc3QodXNlcmxhbmQsIFwiY29uZmlnXCIpO1xuLy8gQ3JlYXRlIGFuZCBleHBvcnQgdGhlIHJvdXRlIG1vZHVsZSB0aGF0IHdpbGwgYmUgY29uc3VtZWQuXG5leHBvcnQgY29uc3Qgcm91dGVNb2R1bGUgPSBuZXcgUGFnZXNBUElSb3V0ZU1vZHVsZSh7XG4gICAgZGVmaW5pdGlvbjoge1xuICAgICAgICBraW5kOiBSb3V0ZUtpbmQuUEFHRVNfQVBJLFxuICAgICAgICBwYWdlOiBcIi9hcGkvdXNlci9sb2dpblwiLFxuICAgICAgICBwYXRobmFtZTogXCIvYXBpL3VzZXIvbG9naW5cIixcbiAgICAgICAgLy8gVGhlIGZvbGxvd2luZyBhcmVuJ3QgdXNlZCBpbiBwcm9kdWN0aW9uLlxuICAgICAgICBidW5kbGVQYXRoOiBcIlwiLFxuICAgICAgICBmaWxlbmFtZTogXCJcIlxuICAgIH0sXG4gICAgdXNlcmxhbmRcbn0pO1xuXG4vLyMgc291cmNlTWFwcGluZ1VSTD1wYWdlcy1hcGkuanMubWFwIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(api)/./node_modules/next/dist/build/webpack/loaders/next-route-loader/index.js?kind=PAGES_API&page=%2Fapi%2Fuser%2Flogin&preferredRegion=&absolutePagePath=.%2Fpages%5Capi%5Cuser%5Clogin.js&middlewareConfigBase64=e30%3D!\n");

/***/ }),

/***/ "(api)/./dbConfig/dbConfig.js":
/*!******************************!*\
  !*** ./dbConfig/dbConfig.js ***!
  \******************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   connect: () => (/* binding */ connect)\n/* harmony export */ });\n/* harmony import */ var mongoose__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! mongoose */ \"mongoose\");\n/* harmony import */ var mongoose__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(mongoose__WEBPACK_IMPORTED_MODULE_0__);\n\nasync function connect() {\n    try {\n        mongoose__WEBPACK_IMPORTED_MODULE_0___default().connect(process.env.MONGO_URI);\n        const connection = (mongoose__WEBPACK_IMPORTED_MODULE_0___default().connection);\n        connection.on(\"connected\", ()=>{\n            console.log(\"Mongo db connected successfully\");\n        });\n        connection.on(\"error\", (err)=>{\n            console.log(\"Mongodb connection error. Please make sure MongoDB is running\", err);\n            process.exit();\n        });\n    } catch (error) {\n        console.log(\"Error while connecting the database\", error);\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwaSkvLi9kYkNvbmZpZy9kYkNvbmZpZy5qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7QUFBZ0M7QUFFekIsZUFBZUM7SUFDbEIsSUFBSTtRQUNBRCx1REFBZ0IsQ0FBQ0UsUUFBUUMsR0FBRyxDQUFDQyxTQUFTO1FBQ3RDLE1BQU1DLGFBQWFMLDREQUFtQjtRQUV0Q0ssV0FBV0MsRUFBRSxDQUFDLGFBQWE7WUFDdkJDLFFBQVFDLEdBQUcsQ0FBQztRQUNoQjtRQUVBSCxXQUFXQyxFQUFFLENBQUMsU0FBUyxDQUFDRztZQUNwQkYsUUFBUUMsR0FBRyxDQUFDLGlFQUFpRUM7WUFDN0VQLFFBQVFRLElBQUk7UUFDaEI7SUFDSixFQUFFLE9BQU9DLE9BQU87UUFDWkosUUFBUUMsR0FBRyxDQUFDLHVDQUF1Q0c7SUFDdkQ7QUFDSiIsInNvdXJjZXMiOlsid2VicGFjazovL211bHRpa2FydC1uZXh0Ly4vZGJDb25maWcvZGJDb25maWcuanM/YjQxOCJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgbW9uZ29vc2UgZnJvbSBcIm1vbmdvb3NlXCI7XHJcblxyXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gY29ubmVjdCgpIHtcclxuICAgIHRyeSB7XHJcbiAgICAgICAgbW9uZ29vc2UuY29ubmVjdChwcm9jZXNzLmVudi5NT05HT19VUkkpO1xyXG4gICAgICAgIGNvbnN0IGNvbm5lY3Rpb24gPSBtb25nb29zZS5jb25uZWN0aW9uXHJcblxyXG4gICAgICAgIGNvbm5lY3Rpb24ub24oJ2Nvbm5lY3RlZCcsICgpID0+IHtcclxuICAgICAgICAgICAgY29uc29sZS5sb2coJ01vbmdvIGRiIGNvbm5lY3RlZCBzdWNjZXNzZnVsbHknKVxyXG4gICAgICAgIH0pXHJcblxyXG4gICAgICAgIGNvbm5lY3Rpb24ub24oJ2Vycm9yJywgKGVycikgPT4ge1xyXG4gICAgICAgICAgICBjb25zb2xlLmxvZyhcIk1vbmdvZGIgY29ubmVjdGlvbiBlcnJvci4gUGxlYXNlIG1ha2Ugc3VyZSBNb25nb0RCIGlzIHJ1bm5pbmdcIiwgZXJyKVxyXG4gICAgICAgICAgICBwcm9jZXNzLmV4aXQoKVxyXG4gICAgICAgIH0pXHJcbiAgICB9IGNhdGNoIChlcnJvcikge1xyXG4gICAgICAgIGNvbnNvbGUubG9nKFwiRXJyb3Igd2hpbGUgY29ubmVjdGluZyB0aGUgZGF0YWJhc2VcIiwgZXJyb3IpXHJcbiAgICB9XHJcbn0iXSwibmFtZXMiOlsibW9uZ29vc2UiLCJjb25uZWN0IiwicHJvY2VzcyIsImVudiIsIk1PTkdPX1VSSSIsImNvbm5lY3Rpb24iLCJvbiIsImNvbnNvbGUiLCJsb2ciLCJlcnIiLCJleGl0IiwiZXJyb3IiXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(api)/./dbConfig/dbConfig.js\n");

/***/ }),

/***/ "(api)/./models/userModel.js":
/*!*****************************!*\
  !*** ./models/userModel.js ***!
  \*****************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__)\n/* harmony export */ });\n/* harmony import */ var mongoose__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! mongoose */ \"mongoose\");\n/* harmony import */ var mongoose__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(mongoose__WEBPACK_IMPORTED_MODULE_0__);\n\nconst userSchema = new (mongoose__WEBPACK_IMPORTED_MODULE_0___default().Schema)({\n    firstName: {\n        type: String,\n        required: [\n            true,\n            \"Please provide a first name\"\n        ]\n    },\n    lastName: {\n        type: String\n    },\n    email: {\n        type: String,\n        required: [\n            true,\n            \"Please  provide a email\"\n        ],\n        unique: true\n    },\n    phone: {\n        type: String,\n        required: [\n            true,\n            \"Please  provide a phone number\"\n        ],\n        unique: true\n    },\n    gender: {\n        type: String,\n        enum: [\n            \"Male\",\n            \"Female\",\n            \"Other\"\n        ],\n        required: [\n            true,\n            \"Please provide a gender information\"\n        ]\n    },\n    password: {\n        type: String,\n        required: [\n            true,\n            \"Please provide a password\"\n        ]\n    },\n    forgotPasswordToken: String,\n    forgotPasswordTokenExpiry: Date,\n    verifyToken: String,\n    verifyTokenExpiry: Date\n}, {\n    timestamps: true\n});\nconst User = (mongoose__WEBPACK_IMPORTED_MODULE_0___default().models).users || mongoose__WEBPACK_IMPORTED_MODULE_0___default().model(\"users\", userSchema);\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (User);\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwaSkvLi9tb2RlbHMvdXNlck1vZGVsLmpzIiwibWFwcGluZ3MiOiI7Ozs7OztBQUErQjtBQUUvQixNQUFNQyxhQUFhLElBQUlELHdEQUFlLENBQUM7SUFDbkNHLFdBQVc7UUFDUEMsTUFBTUM7UUFDTkMsVUFBVTtZQUFDO1lBQU07U0FBOEI7SUFDbkQ7SUFDQUMsVUFBVTtRQUNOSCxNQUFNQztJQUNWO0lBQ0FHLE9BQU87UUFDSEosTUFBTUM7UUFDTkMsVUFBVTtZQUFDO1lBQU07U0FBMEI7UUFDM0NHLFFBQVE7SUFDWjtJQUNBQyxPQUFPO1FBQ0hOLE1BQU1DO1FBQ05DLFVBQVU7WUFBQztZQUFNO1NBQWlDO1FBQ2xERyxRQUFRO0lBQ1o7SUFDQUUsUUFBUTtRQUNKUCxNQUFNQztRQUNOTyxNQUFNO1lBQUM7WUFBUTtZQUFVO1NBQVE7UUFDakNOLFVBQVU7WUFBQztZQUFNO1NBQXNDO0lBQzNEO0lBQ0FPLFVBQVU7UUFDTlQsTUFBTUM7UUFDTkMsVUFBVTtZQUFDO1lBQU07U0FBNEI7SUFDakQ7SUFFQVEscUJBQXFCVDtJQUNyQlUsMkJBQTJCQztJQUMzQkMsYUFBYVo7SUFDYmEsbUJBQW1CRjtBQUV2QixHQUFHO0lBQUVHLFlBQVk7QUFBSztBQUV0QixNQUFNQyxPQUFPcEIsd0RBQWUsQ0FBQ3NCLEtBQUssSUFBSXRCLHFEQUFjLENBQUMsU0FBU0M7QUFFOUQsaUVBQWVtQixJQUFJQSxFQUFBIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vbXVsdGlrYXJ0LW5leHQvLi9tb2RlbHMvdXNlck1vZGVsLmpzPzk2MTciXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IG1vbmdvb3NlIGZyb20gJ21vbmdvb3NlJ1xyXG5cclxuY29uc3QgdXNlclNjaGVtYSA9IG5ldyBtb25nb29zZS5TY2hlbWEoe1xyXG4gICAgZmlyc3ROYW1lOiB7XHJcbiAgICAgICAgdHlwZTogU3RyaW5nLFxyXG4gICAgICAgIHJlcXVpcmVkOiBbdHJ1ZSwgXCJQbGVhc2UgcHJvdmlkZSBhIGZpcnN0IG5hbWVcIl0sXHJcbiAgICB9LFxyXG4gICAgbGFzdE5hbWU6IHtcclxuICAgICAgICB0eXBlOiBTdHJpbmcsXHJcbiAgICB9LFxyXG4gICAgZW1haWw6IHtcclxuICAgICAgICB0eXBlOiBTdHJpbmcsXHJcbiAgICAgICAgcmVxdWlyZWQ6IFt0cnVlLCBcIlBsZWFzZSAgcHJvdmlkZSBhIGVtYWlsXCJdLFxyXG4gICAgICAgIHVuaXF1ZTogdHJ1ZVxyXG4gICAgfSxcclxuICAgIHBob25lOiB7XHJcbiAgICAgICAgdHlwZTogU3RyaW5nLFxyXG4gICAgICAgIHJlcXVpcmVkOiBbdHJ1ZSwgXCJQbGVhc2UgIHByb3ZpZGUgYSBwaG9uZSBudW1iZXJcIl0sXHJcbiAgICAgICAgdW5pcXVlOiB0cnVlXHJcbiAgICB9LFxyXG4gICAgZ2VuZGVyOiB7XHJcbiAgICAgICAgdHlwZTogU3RyaW5nLFxyXG4gICAgICAgIGVudW06IFtcIk1hbGVcIiwgXCJGZW1hbGVcIiwgXCJPdGhlclwiXSxcclxuICAgICAgICByZXF1aXJlZDogW3RydWUsIFwiUGxlYXNlIHByb3ZpZGUgYSBnZW5kZXIgaW5mb3JtYXRpb25cIl1cclxuICAgIH0sXHJcbiAgICBwYXNzd29yZDoge1xyXG4gICAgICAgIHR5cGU6IFN0cmluZyxcclxuICAgICAgICByZXF1aXJlZDogW3RydWUsIFwiUGxlYXNlIHByb3ZpZGUgYSBwYXNzd29yZFwiXVxyXG4gICAgfSxcclxuXHJcbiAgICBmb3Jnb3RQYXNzd29yZFRva2VuOiBTdHJpbmcsXHJcbiAgICBmb3Jnb3RQYXNzd29yZFRva2VuRXhwaXJ5OiBEYXRlLFxyXG4gICAgdmVyaWZ5VG9rZW46IFN0cmluZyxcclxuICAgIHZlcmlmeVRva2VuRXhwaXJ5OiBEYXRlXHJcblxyXG59LCB7IHRpbWVzdGFtcHM6IHRydWUgfSlcclxuXHJcbmNvbnN0IFVzZXIgPSBtb25nb29zZS5tb2RlbHMudXNlcnMgfHwgbW9uZ29vc2UubW9kZWwoXCJ1c2Vyc1wiLCB1c2VyU2NoZW1hKVxyXG5cclxuZXhwb3J0IGRlZmF1bHQgVXNlciJdLCJuYW1lcyI6WyJtb25nb29zZSIsInVzZXJTY2hlbWEiLCJTY2hlbWEiLCJmaXJzdE5hbWUiLCJ0eXBlIiwiU3RyaW5nIiwicmVxdWlyZWQiLCJsYXN0TmFtZSIsImVtYWlsIiwidW5pcXVlIiwicGhvbmUiLCJnZW5kZXIiLCJlbnVtIiwicGFzc3dvcmQiLCJmb3Jnb3RQYXNzd29yZFRva2VuIiwiZm9yZ290UGFzc3dvcmRUb2tlbkV4cGlyeSIsIkRhdGUiLCJ2ZXJpZnlUb2tlbiIsInZlcmlmeVRva2VuRXhwaXJ5IiwidGltZXN0YW1wcyIsIlVzZXIiLCJtb2RlbHMiLCJ1c2VycyIsIm1vZGVsIl0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(api)/./models/userModel.js\n");

/***/ }),

/***/ "(api)/./pages/api/user/login.js":
/*!*********************************!*\
  !*** ./pages/api/user/login.js ***!
  \*********************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (/* binding */ handler)\n/* harmony export */ });\n/* harmony import */ var _dbConfig_dbConfig_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../../dbConfig/dbConfig.js */ \"(api)/./dbConfig/dbConfig.js\");\n/* harmony import */ var bcryptjs__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! bcryptjs */ \"bcryptjs\");\n/* harmony import */ var bcryptjs__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(bcryptjs__WEBPACK_IMPORTED_MODULE_1__);\n/* harmony import */ var _models_userModel_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../../models/userModel.js */ \"(api)/./models/userModel.js\");\n/* harmony import */ var jsonwebtoken__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! jsonwebtoken */ \"jsonwebtoken\");\n/* harmony import */ var jsonwebtoken__WEBPACK_IMPORTED_MODULE_3___default = /*#__PURE__*/__webpack_require__.n(jsonwebtoken__WEBPACK_IMPORTED_MODULE_3__);\n/* harmony import */ var cookie__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! cookie */ \"cookie\");\n/* harmony import */ var cookie__WEBPACK_IMPORTED_MODULE_4___default = /*#__PURE__*/__webpack_require__.n(cookie__WEBPACK_IMPORTED_MODULE_4__);\n\n\n\n\n\n(0,_dbConfig_dbConfig_js__WEBPACK_IMPORTED_MODULE_0__.connect)();\nasync function handler(req, res) {\n    try {\n        const { email, password } = req.body;\n        if ([\n            email,\n            password\n        ].some((field)=>field?.trim() === \"\")) {\n            return res.status(400).json({\n                error: \"Please provide all the fields information\"\n            });\n        }\n        // Check if user exists\n        const user = await _models_userModel_js__WEBPACK_IMPORTED_MODULE_2__[\"default\"].findOne({\n            email\n        });\n        if (!user) {\n            return res.status(400).json({\n                error: \"User does not exist.\"\n            });\n        }\n        // Validate the password\n        const isValidPassword = await bcryptjs__WEBPACK_IMPORTED_MODULE_1___default().compare(password, user.password);\n        if (!isValidPassword) {\n            return res.status(400).json({\n                error: \"Invalid credentials\"\n            });\n        }\n        // Create token data\n        const token = jsonwebtoken__WEBPACK_IMPORTED_MODULE_3___default().sign({\n            id: user._id,\n            email: user.email\n        }, process.env.TOKEN_SECRET, {\n            expiresIn: \"1d\"\n        } // Token expiration\n        );\n        // Serialize the cookie\n        const serializedCookie = (0,cookie__WEBPACK_IMPORTED_MODULE_4__.serialize)(\"token\", token, {\n            httpOnly: true,\n            secure: \"development\" === \"production\",\n            path: \"/\",\n            maxAge: 60 * 60 * 24\n        });\n        // Set the cookie header\n        res.setHeader(\"Set-Cookie\", serializedCookie);\n        // Exclude sensitive information from the user object\n        const loggedUser = user.toObject();\n        delete loggedUser.password;\n        return res.json({\n            message: \"Login successful\",\n            success: true,\n            user: loggedUser\n        });\n    } catch (error) {\n        console.error(\"Error:\", error);\n        return res.status(500).json({\n            error: \"Internal server error\"\n        });\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwaSkvLi9wYWdlcy9hcGkvdXNlci9sb2dpbi5qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7QUFBd0Q7QUFDeEI7QUFDZ0I7QUFDakI7QUFDSTtBQUduQ0EsOERBQU9BO0FBRVEsZUFBZUssUUFBUUMsR0FBRyxFQUFFQyxHQUFHO0lBQzVDLElBQUk7UUFDRixNQUFNLEVBQUVDLEtBQUssRUFBRUMsUUFBUSxFQUFFLEdBQUdILElBQUlJLElBQUk7UUFFcEMsSUFBSTtZQUFDRjtZQUFPQztTQUFTLENBQUNFLElBQUksQ0FBQyxDQUFDQyxRQUFVQSxPQUFPQyxXQUFXLEtBQUs7WUFDM0QsT0FBT04sSUFBSU8sTUFBTSxDQUFDLEtBQUtDLElBQUksQ0FBQztnQkFBRUMsT0FBTztZQUE0QztRQUNuRjtRQUVBLHVCQUF1QjtRQUN2QixNQUFNQyxPQUFPLE1BQU1mLG9FQUFZLENBQUM7WUFBRU07UUFBTTtRQUV4QyxJQUFJLENBQUNTLE1BQU07WUFDVCxPQUFPVixJQUFJTyxNQUFNLENBQUMsS0FBS0MsSUFBSSxDQUFDO2dCQUFFQyxPQUFPO1lBQXVCO1FBQzlEO1FBRUEsd0JBQXdCO1FBQ3hCLE1BQU1HLGtCQUFrQixNQUFNbEIsdURBQWdCLENBQUNRLFVBQVVRLEtBQUtSLFFBQVE7UUFFdEUsSUFBSSxDQUFDVSxpQkFBaUI7WUFDcEIsT0FBT1osSUFBSU8sTUFBTSxDQUFDLEtBQUtDLElBQUksQ0FBQztnQkFBRUMsT0FBTztZQUFzQjtRQUM3RDtRQUVBLG9CQUFvQjtRQUNwQixNQUFNSyxRQUFRbEIsd0RBQVEsQ0FDcEI7WUFBRW9CLElBQUlOLEtBQUtPLEdBQUc7WUFBRWhCLE9BQU9TLEtBQUtULEtBQUs7UUFBQyxHQUNsQ2lCLFFBQVFDLEdBQUcsQ0FBQ0MsWUFBWSxFQUN4QjtZQUFFQyxXQUFXO1FBQUssRUFBRSxtQkFBbUI7O1FBR3pDLHVCQUF1QjtRQUN2QixNQUFNQyxtQkFBbUJ6QixpREFBU0EsQ0FBQyxTQUFTaUIsT0FBTztZQUNqRFMsVUFBVTtZQUNWQyxRQUFRTixrQkFBeUI7WUFDakNPLE1BQU07WUFDTkMsUUFBUSxLQUFLLEtBQUs7UUFDcEI7UUFFQSx3QkFBd0I7UUFDeEIxQixJQUFJMkIsU0FBUyxDQUFDLGNBQWNMO1FBRTVCLHFEQUFxRDtRQUNyRCxNQUFNTSxhQUFhbEIsS0FBS21CLFFBQVE7UUFDaEMsT0FBT0QsV0FBVzFCLFFBQVE7UUFFMUIsT0FBT0YsSUFBSVEsSUFBSSxDQUFDO1lBQ2RzQixTQUFTO1lBQ1RDLFNBQVM7WUFDVHJCLE1BQU1rQjtRQUNSO0lBRUYsRUFBRSxPQUFPbkIsT0FBTztRQUNkdUIsUUFBUXZCLEtBQUssQ0FBQyxVQUFVQTtRQUN4QixPQUFPVCxJQUFJTyxNQUFNLENBQUMsS0FBS0MsSUFBSSxDQUFDO1lBQUVDLE9BQU87UUFBd0I7SUFDL0Q7QUFDRiIsInNvdXJjZXMiOlsid2VicGFjazovL211bHRpa2FydC1uZXh0Ly4vcGFnZXMvYXBpL3VzZXIvbG9naW4uanM/ZThhNyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBjb25uZWN0IH0gZnJvbSBcIi4uLy4uLy4uL2RiQ29uZmlnL2RiQ29uZmlnLmpzXCI7XHJcbmltcG9ydCBiY3J5cHRqcyBmcm9tIFwiYmNyeXB0anNcIjtcclxuaW1wb3J0IFVzZXIgZnJvbSBcIi4uLy4uLy4uL21vZGVscy91c2VyTW9kZWwuanNcIjtcclxuaW1wb3J0IGp3dCBmcm9tICdqc29ud2VidG9rZW4nO1xyXG5pbXBvcnQgeyBzZXJpYWxpemUgfSBmcm9tICdjb29raWUnO1xyXG5cclxuXHJcbmNvbm5lY3QoKTtcclxuXHJcbmV4cG9ydCBkZWZhdWx0IGFzeW5jIGZ1bmN0aW9uIGhhbmRsZXIocmVxLCByZXMpIHtcclxuICB0cnkge1xyXG4gICAgY29uc3QgeyBlbWFpbCwgcGFzc3dvcmQgfSA9IHJlcS5ib2R5O1xyXG5cclxuICAgIGlmIChbZW1haWwsIHBhc3N3b3JkXS5zb21lKChmaWVsZCkgPT4gZmllbGQ/LnRyaW0oKSA9PT0gXCJcIikpIHtcclxuICAgICAgcmV0dXJuIHJlcy5zdGF0dXMoNDAwKS5qc29uKHsgZXJyb3I6IFwiUGxlYXNlIHByb3ZpZGUgYWxsIHRoZSBmaWVsZHMgaW5mb3JtYXRpb25cIiB9KTtcclxuICAgIH1cclxuXHJcbiAgICAvLyBDaGVjayBpZiB1c2VyIGV4aXN0c1xyXG4gICAgY29uc3QgdXNlciA9IGF3YWl0IFVzZXIuZmluZE9uZSh7IGVtYWlsIH0pO1xyXG5cclxuICAgIGlmICghdXNlcikge1xyXG4gICAgICByZXR1cm4gcmVzLnN0YXR1cyg0MDApLmpzb24oeyBlcnJvcjogXCJVc2VyIGRvZXMgbm90IGV4aXN0LlwiIH0pO1xyXG4gICAgfVxyXG5cclxuICAgIC8vIFZhbGlkYXRlIHRoZSBwYXNzd29yZFxyXG4gICAgY29uc3QgaXNWYWxpZFBhc3N3b3JkID0gYXdhaXQgYmNyeXB0anMuY29tcGFyZShwYXNzd29yZCwgdXNlci5wYXNzd29yZCk7XHJcblxyXG4gICAgaWYgKCFpc1ZhbGlkUGFzc3dvcmQpIHtcclxuICAgICAgcmV0dXJuIHJlcy5zdGF0dXMoNDAwKS5qc29uKHsgZXJyb3I6IFwiSW52YWxpZCBjcmVkZW50aWFsc1wiIH0pO1xyXG4gICAgfVxyXG5cclxuICAgIC8vIENyZWF0ZSB0b2tlbiBkYXRhXHJcbiAgICBjb25zdCB0b2tlbiA9IGp3dC5zaWduKFxyXG4gICAgICB7IGlkOiB1c2VyLl9pZCwgZW1haWw6IHVzZXIuZW1haWwgfSxcclxuICAgICAgcHJvY2Vzcy5lbnYuVE9LRU5fU0VDUkVULFxyXG4gICAgICB7IGV4cGlyZXNJbjogJzFkJyB9IC8vIFRva2VuIGV4cGlyYXRpb25cclxuICAgICk7XHJcblxyXG4gICAgLy8gU2VyaWFsaXplIHRoZSBjb29raWVcclxuICAgIGNvbnN0IHNlcmlhbGl6ZWRDb29raWUgPSBzZXJpYWxpemUoJ3Rva2VuJywgdG9rZW4sIHtcclxuICAgICAgaHR0cE9ubHk6IHRydWUsXHJcbiAgICAgIHNlY3VyZTogcHJvY2Vzcy5lbnYuTk9ERV9FTlYgPT09ICdwcm9kdWN0aW9uJyxcclxuICAgICAgcGF0aDogJy8nLFxyXG4gICAgICBtYXhBZ2U6IDYwICogNjAgKiAyNCwgLy8gMjQgaG91cnNcclxuICAgIH0pO1xyXG5cclxuICAgIC8vIFNldCB0aGUgY29va2llIGhlYWRlclxyXG4gICAgcmVzLnNldEhlYWRlcignU2V0LUNvb2tpZScsIHNlcmlhbGl6ZWRDb29raWUpO1xyXG5cclxuICAgIC8vIEV4Y2x1ZGUgc2Vuc2l0aXZlIGluZm9ybWF0aW9uIGZyb20gdGhlIHVzZXIgb2JqZWN0XHJcbiAgICBjb25zdCBsb2dnZWRVc2VyID0gdXNlci50b09iamVjdCgpO1xyXG4gICAgZGVsZXRlIGxvZ2dlZFVzZXIucGFzc3dvcmQ7XHJcblxyXG4gICAgcmV0dXJuIHJlcy5qc29uKHtcclxuICAgICAgbWVzc2FnZTogXCJMb2dpbiBzdWNjZXNzZnVsXCIsXHJcbiAgICAgIHN1Y2Nlc3M6IHRydWUsXHJcbiAgICAgIHVzZXI6IGxvZ2dlZFVzZXIsXHJcbiAgICB9KTtcclxuXHJcbiAgfSBjYXRjaCAoZXJyb3IpIHtcclxuICAgIGNvbnNvbGUuZXJyb3IoXCJFcnJvcjpcIiwgZXJyb3IpO1xyXG4gICAgcmV0dXJuIHJlcy5zdGF0dXMoNTAwKS5qc29uKHsgZXJyb3I6IFwiSW50ZXJuYWwgc2VydmVyIGVycm9yXCIgfSk7XHJcbiAgfVxyXG59XHJcbiJdLCJuYW1lcyI6WyJjb25uZWN0IiwiYmNyeXB0anMiLCJVc2VyIiwiand0Iiwic2VyaWFsaXplIiwiaGFuZGxlciIsInJlcSIsInJlcyIsImVtYWlsIiwicGFzc3dvcmQiLCJib2R5Iiwic29tZSIsImZpZWxkIiwidHJpbSIsInN0YXR1cyIsImpzb24iLCJlcnJvciIsInVzZXIiLCJmaW5kT25lIiwiaXNWYWxpZFBhc3N3b3JkIiwiY29tcGFyZSIsInRva2VuIiwic2lnbiIsImlkIiwiX2lkIiwicHJvY2VzcyIsImVudiIsIlRPS0VOX1NFQ1JFVCIsImV4cGlyZXNJbiIsInNlcmlhbGl6ZWRDb29raWUiLCJodHRwT25seSIsInNlY3VyZSIsInBhdGgiLCJtYXhBZ2UiLCJzZXRIZWFkZXIiLCJsb2dnZWRVc2VyIiwidG9PYmplY3QiLCJtZXNzYWdlIiwic3VjY2VzcyIsImNvbnNvbGUiXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(api)/./pages/api/user/login.js\n");

/***/ })

};
;

// load runtime
var __webpack_require__ = require("../../../webpack-api-runtime.js");
__webpack_require__.C(exports);
var __webpack_exec__ = (moduleId) => (__webpack_require__(__webpack_require__.s = moduleId))
var __webpack_exports__ = __webpack_require__.X(0, ["vendor-chunks/next"], () => (__webpack_exec__("(api)/./node_modules/next/dist/build/webpack/loaders/next-route-loader/index.js?kind=PAGES_API&page=%2Fapi%2Fuser%2Flogin&preferredRegion=&absolutePagePath=.%2Fpages%5Capi%5Cuser%5Clogin.js&middlewareConfigBase64=e30%3D!")));
module.exports = __webpack_exports__;

})();